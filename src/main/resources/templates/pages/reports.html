<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>주간보고 - Weekly Report</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" th:href="@{/css/custom.css}">
    <link rel="stylesheet" th:href="@{/css/pages/reports.css}">
</head>
<body>

<!-- Navbar -->
<th:block th:insert="~{layout/fragments :: navbar}"></th:block>

<!-- Main Content -->
<main class="main-content">
    <div class="header">
        <h1>주간보고 생성</h1>
        <select id="userSelect">
            <option value="">사용자 선택...</option>
            <option th:each="user : ${users}" th:value="${user.id}" th:text="${user.name + ' (' + (user.department ?: '-') + ')'}"></option>
        </select>
        <select id="templateSelect">
            <option value="">템플릿 선택...</option>
            <option th:each="template : ${templates}" th:value="${template.id}" th:text="${template.name}"></option>
        </select>
    </div>

    <div class="chat" id="chat"></div>

    <div class="actions">
        <button onclick="doAction('entries')">내 업무기록</button>
        <button onclick="doAction('generate')">주간보고 생성</button>
        <button onclick="doAction('reports')">내 보고서</button>
    </div>

    <div class="input-area">
        <textarea id="input" placeholder="업무 내용을 입력하세요... (Shift+Enter: 줄바꿈)" onkeydown="handleKey(event)"></textarea>
        <button onclick="sendEntry()">전송</button>
    </div>
</main>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script th:src="@{/js/pages/reports.js}"></script>

</body>
</html>
